


ARM Macro Assembler    Page 1 


    1 00000000         ; Start of file HexToVal.s
    2 00000000         ;
    3 00000000         ; Copyright 2017 University of Dublin. All Rights Reserv
                       ed.
    4 00000000         ;
    5 00000000         ; Design and write an assembly language program that
    6 00000000         ; will convert an ASCII representation of a hexadecimal
    7 00000000         ; value to a value. TestStr is a NULL-terminated string 
                       
    8 00000000         ; in memory and the converted value should be stored in 
                       
    9 00000000         ; register r0.
   10 00000000                 AREA             HexToVal, CODE, READONLY
   11 00000000                 IMPORT           main
   12 00000000                 EXPORT           start
   13 00000000         start
   14 00000000         
   15 00000000         ; Changes above this line are discarded by CODEMARK.
   16 00000000         ; Enter your solution between dashed lines only.
   17 00000000         ; ARM syntax requires instructions to be indented by
   18 00000000         ; at least one space or tab.
   19 00000000         ; -------------- start cut ------------------------
   20 00000000 E59F107C        LDR              r1, =TestStr
   21 00000004 E3A00000        LDR              r0, =0
   22 00000008 E3A03000        LDR              r3, =0
   23 0000000C E3A04000        LDR              r4, =0
   24 00000010 EA000017        B                loop
   25 00000014 E1A00410 
                       wh1     MOV              r0, r0, LSL r4
   26 00000018 E3530039        CMP              r3, #'9'
   27 0000001C 8A000001        BHI              endif1
   28 00000020 E3C33030        BIC              r3, #0x30
   29 00000024 EA00000E        B                ins
   30 00000028 E353004F 
                       endif1  CMP              r3, #'O'
   31 0000002C 8A000001        BHI              endif2
   32 00000030 E3C33040        BIC              r3, #0x40
   33 00000034 EA000008        B                lett
   34 00000038 E353005A 
                       endif2  CMP              r3, #'Z'
   35 0000003C 8A000001        BHI              endif3
   36 00000040 E3C33050        BIC              r3, #0x50
   37 00000044 EA000004        B                lett
   38 00000048 E353006F 
                       endif3  CMP              r3, #'o'
   39 0000004C 8A000001        BHI              endif4
   40 00000050 E3C33060        BIC              r3, #0x60
   41 00000054 EA000000        B                lett
   42 00000058 E3C33070 
                       endif4  BIC              r3, #0x70
   43 0000005C E283300A 
                       lett    ADD              r3, #0xA
   44 00000060 E2433001        SUB              r3, #1
   45 00000064 E0800003 
                       ins     ADD              r0, r3
   46 00000068 E3540000        CMP              r4, #0x0
   47 0000006C 1A000000        BNE              loop
   48 00000070 E2844004        ADD              r4, #4
   49 00000074 E4D13001 



ARM Macro Assembler    Page 2 


                       loop    LDRB             r3, [r1], #1
   50 00000078 E3530000        CMP              r3, #0
   51 0000007C 1AFFFFE4        BNE              wh1         ;while not a null c
                                                            haracter
   52 00000080         ; -------------- end cut --------------------------
   53 00000080         ; Changes below this line are discarded by CODEMARK.
   54 00000080         ; Enter your solution between dashed lines only.
   55 00000080         
   56 00000080 EAFFFFFE 
                       stop    B                stop
   57 00000084 00000000        AREA             HexToVal, DATA, READWRITE
   58 00000088 31 32 33 
              61 42 63 
              31 32 00 TestStr DCB              "123aBc12",0
   59 00000091                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\o
bjects\hextoval.d -o.\objects\hextoval.o -ID:\Utilities\Keil\ARM\RV31\INC -ID:\
Utilities\Keil\ARM\CMSIS\Include -ID:\Utilities\Keil\ARM\INC\Philips --predefin
e="__EVAL SETA 1" --predefine="__MICROLIB SETA 1" --predefine="__UVISION_VERSIO
N SETA 524" --list=.\listings\hextoval.lst hextoval.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

HexToVal 00000000

Symbol: HexToVal
   Definitions
      At line 10 in file hextoval.s
   Uses
      None
Comment: HexToVal unused
TestStr 00000088

Symbol: TestStr
   Definitions
      At line 58 in file hextoval.s
   Uses
      At line 20 in file hextoval.s
Comment: TestStr used once
endif1 00000028

Symbol: endif1
   Definitions
      At line 30 in file hextoval.s
   Uses
      At line 27 in file hextoval.s
Comment: endif1 used once
endif2 00000038

Symbol: endif2
   Definitions
      At line 34 in file hextoval.s
   Uses
      At line 31 in file hextoval.s
Comment: endif2 used once
endif3 00000048

Symbol: endif3
   Definitions
      At line 38 in file hextoval.s
   Uses
      At line 35 in file hextoval.s
Comment: endif3 used once
endif4 00000058

Symbol: endif4
   Definitions
      At line 42 in file hextoval.s
   Uses
      At line 39 in file hextoval.s
Comment: endif4 used once
ins 00000064

Symbol: ins
   Definitions
      At line 45 in file hextoval.s
   Uses
      At line 29 in file hextoval.s
Comment: ins used once
lett 0000005C

Symbol: lett



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 43 in file hextoval.s
   Uses
      At line 33 in file hextoval.s
      At line 37 in file hextoval.s
      At line 41 in file hextoval.s

loop 00000074

Symbol: loop
   Definitions
      At line 49 in file hextoval.s
   Uses
      At line 24 in file hextoval.s
      At line 47 in file hextoval.s

start 00000000

Symbol: start
   Definitions
      At line 13 in file hextoval.s
   Uses
      At line 12 in file hextoval.s
Comment: start used once
stop 00000080

Symbol: stop
   Definitions
      At line 56 in file hextoval.s
   Uses
      At line 56 in file hextoval.s
Comment: stop used once
wh1 00000014

Symbol: wh1
   Definitions
      At line 25 in file hextoval.s
   Uses
      At line 51 in file hextoval.s
Comment: wh1 used once
12 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 11 in file hextoval.s
   Uses
      None
Comment: main unused
1 symbol
348 symbols in table
