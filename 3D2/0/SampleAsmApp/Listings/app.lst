


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             AsmTemplate, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000         
    4 00000000         ; sample program makes the 4 LEDs P1.16, P1.17, P1.18, P
                       1.19 go on and off in sequence
    5 00000000         ; (c) Mike Brady, 2011.
    6 00000000         
    7 00000000                 EXPORT           start
    8 00000000         start
    9 00000000         
   10 00000000 E0028018 
                       IO1DIR  EQU              0xE0028018
   11 00000000 E0028014 
                       IO1SET  EQU              0xE0028014
   12 00000000 E002801C 
                       IO1CLR  EQU              0xE002801C
   13 00000000         
   14 00000000 E59F106C        ldr              r1,=IO1DIR
   15 00000004 E3A0280F        ldr              r2,=0x000f0000 ;select P1.19--P
                                                            1.16
   16 00000008 E5812000        str              r2,[r1]     ;make them outputs
   17 0000000C E59F1064        ldr              r1,=IO1SET
   18 00000010 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
   19 00000014 E59F2060        ldr              r2,=IO1CLR
   20 00000018         ; r1 points to the SET register
   21 00000018         ; r2 points to the CLEAR register
   22 00000018         
   23 00000018 E3A07000        ldr              r7,=0
   24 0000001C E3A06702        ldr              r6,=0x00080000 ; end when the m
                                                            ask reaches this va
                                                            lue
   25 00000020 E3A05801        ldr              r5,=0x00010000 ; end when reach
                                                             this value
   26 00000024 E3A03801        ldr              r3,=0x00010000
   27 00000028         ;wloop1 ldr r3,=0x00010000 ; start with P1.16.
   28 00000028         ;wloop2 ldr r3, =0x00080000 ; start with P1.19
   29 00000028 E5823000 
                       floop   str              r3,[r2]     ; clear the bit -> 
                                                            turn on the LED
   30 0000002C         
   31 0000002C         ;delay for about a half second
   32 0000002C E59F404C        ldr              r4,=1000000
   33 00000030 E2544001 
                       dloop   subs             r4,r4,#1
   34 00000034 1AFFFFFD        bne              dloop
   35 00000038         
   36 00000038 E5813000        str              r3,[r1]     ;set the bit -> tur
                                                            n off the LED
   37 0000003C E3570000        cmp              r7, #0
   38 00000040 0A000003        beq              ltr
   39 00000044 1AFFFFFF        bne              rtl
   40 00000048 E1530006 
                       rtl     cmp              r3, r6
   41 0000004C 03A07000        ldreq            r7, =0
   42 00000050 EA000002        b                inc
   43 00000054 E1530005 
                       ltr     cmp              r3, r5
   44 00000058 03A07001        ldreq            r7, =1



ARM Macro Assembler    Page 2 


   45 0000005C EAFFFFFF        b                inc
   46 00000060         
   47 00000060 E3570000 
                       inc     cmp              r7, #0
   48 00000064 01A030A3        moveq            r3,r3,lsr #1 ;shift down to nex
                                                            t bit. P1.19 -> P1`
                                                            .18 etc.
   49 00000068 11A03083        movne            r3,r3,lsl #1 ;shift up to next 
                                                            bit. P1.16 -> P1.17
                                                             etc.
   50 0000006C EAFFFFED        b                floop
   51 00000070 EAFFFFFE 
                       stop    B                stop
   52 00000074         
   53 00000074                 END
              E0028018 
              E0028014 
              E002801C 
              000F4240 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Ke
il_v5\ARM\Inc\Philips --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 
1" --predefine="__UVISION_VERSION SETA 516" --list=.\listings\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

AsmTemplate 00000000

Symbol: AsmTemplate
   Definitions
      At line 1 in file App.s
   Uses
      None
Comment: AsmTemplate unused
dloop 00000030

Symbol: dloop
   Definitions
      At line 33 in file App.s
   Uses
      At line 34 in file App.s
Comment: dloop used once
floop 00000028

Symbol: floop
   Definitions
      At line 29 in file App.s
   Uses
      At line 50 in file App.s
Comment: floop used once
inc 00000060

Symbol: inc
   Definitions
      At line 47 in file App.s
   Uses
      At line 42 in file App.s
      At line 45 in file App.s

ltr 00000054

Symbol: ltr
   Definitions
      At line 43 in file App.s
   Uses
      At line 38 in file App.s
Comment: ltr used once
rtl 00000048

Symbol: rtl
   Definitions
      At line 40 in file App.s
   Uses
      At line 39 in file App.s
Comment: rtl used once
start 00000000

Symbol: start
   Definitions
      At line 8 in file App.s
   Uses
      At line 7 in file App.s
Comment: start used once
stop 00000070




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: stop
   Definitions
      At line 51 in file App.s
   Uses
      At line 51 in file App.s
Comment: stop used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

IO1CLR E002801C

Symbol: IO1CLR
   Definitions
      At line 12 in file App.s
   Uses
      At line 19 in file App.s
Comment: IO1CLR used once
IO1DIR E0028018

Symbol: IO1DIR
   Definitions
      At line 10 in file App.s
   Uses
      At line 14 in file App.s
Comment: IO1DIR used once
IO1SET E0028014

Symbol: IO1SET
   Definitions
      At line 11 in file App.s
   Uses
      At line 17 in file App.s
Comment: IO1SET used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 2 in file App.s
   Uses
      None
Comment: main unused
1 symbol
347 symbols in table
