


ARM Macro Assembler    Page 1 


    1 00000000         ; Definitions  -- references to 'UM' are to the User Man
                       ual.
    2 00000000         
    3 00000000         ; Timer Stuff -- UM, Table 173
    4 00000000         
    5 00000000 E0004000 
                       T0      equ              0xE0004000  ; Timer 0 Base Addr
                                                            ess
    6 00000000 E0008000 
                       T1      equ              0xE0008000
    7 00000000         
    8 00000000 00000000 
                       IR      equ              0           ; Add this to a tim
                                                            er's base address t
                                                            o get actual regist
                                                            er address
    9 00000000 00000004 
                       TCR     equ              4
   10 00000000 00000014 
                       MCR     equ              0x14
   11 00000000 00000018 
                       MR0     equ              0x18
   12 00000000         
   13 00000000 00000002 
                       TimerCommandReset
                               equ              2
   14 00000000 00000001 
                       TimerCommandRun
                               equ              1
   15 00000000 00000003 
                       TimerModeResetAndInterrupt
                               equ              3
   16 00000000 00000001 
                       TimerResetTimer0Interrupt
                               equ              1
   17 00000000 000000FF 
                       TimerResetAllInterrupts
                               equ              0xFF
   18 00000000         
   19 00000000         ; VIC Stuff -- UM, Table 41
   20 00000000 FFFFF000 
                       VIC     equ              0xFFFFF000  ; VIC Base Address
   21 00000000 00000010 
                       IntEnable
                               equ              0x10
   22 00000000 00000030 
                       VectAddr
                               equ              0x30
   23 00000000 00000100 
                       VectAddr0
                               equ              0x100
   24 00000000 00000200 
                       VectCtrl0
                               equ              0x200
   25 00000000         
   26 00000000 00000004 
                       Timer0ChannelNumber
                               equ              4           ; UM, Table 63
   27 00000000 00000010 



ARM Macro Assembler    Page 2 


                       Timer0Mask
                               equ              1<<Timer0ChannelNumber 
                                                            ; UM, Table 63
   28 00000000 00000005 
                       IRQslot_en
                               equ              5           ; UM, Table 58
   29 00000000         
   30 00000000 E0028018 
                       IO1DIR  EQU              0xE0028018
   31 00000000 E0028014 
                       IO1SET  EQU              0xE0028014
   32 00000000 E002801C 
                       IO1CLR  EQU              0xE002801C
   33 00000000         
   34 00000000                 AREA             InitialisationAndMain, CODE, RE
ADONLY
   35 00000000                 IMPORT           main
   36 00000000         
   37 00000000         ; (c) Mike Brady, 2014â€“2016.
   38 00000000         
   39 00000000                 EXPORT           start
   40 00000000         start
   41 00000000         ; initialisation code
   42 00000000         
   43 00000000         ; Initialise the VIC
   44 00000000 E59F005C        ldr              r0,=VIC     ; looking at you, V
                                                            IC!
   45 00000004         
   46 00000004 E59F105C        ldr              r1,=irqhan
   47 00000008 E5801100        str              r1,[r0,#VectAddr0] ; associate 
                                                            our interrupt handl
                                                            er with Vectored In
                                                            terrupt 0
   48 0000000C         
   49 0000000C E3A01024        mov              r1,#Timer0ChannelNumber+(1<<IRQ
slot_en)
   50 00000010 E5801200        str              r1,[r0,#VectCtrl0] ; make Timer
                                                             0 interrupts the s
                                                            ource of Vectored I
                                                            nterrupt 0
   51 00000014         
   52 00000014 E3A01010        mov              r1,#Timer0Mask
   53 00000018 E5801010        str              r1,[r0,#IntEnable] ; enable Tim
                                                            er 0 interrupts to 
                                                            be recognised by th
                                                            e VIC
   54 0000001C         
   55 0000001C E3A01000        mov              r1,#0
   56 00000020 E5801030        str              r1,[r0,#VectAddr] ; remove any 
                                                            pending interrupt (
                                                            may not be needed)
   57 00000024         
   58 00000024         ; Initialise Timer 0
   59 00000024 E59F0040        ldr              r0,=T0      ; looking at you, T
                                                            imer 0!
   60 00000028         
   61 00000028 E3A01002        mov              r1,#TimerCommandReset
   62 0000002C E5801004        str              r1,[r0,#TCR]
   63 00000030         



ARM Macro Assembler    Page 3 


   64 00000030 E3A010FF        mov              r1,#TimerResetAllInterrupts
   65 00000034 E5801000        str              r1,[r0,#IR]
   66 00000038         
   67 00000038 E59F1030        ldr              r1,=(14745600/200)-1 ; 5 ms = 1
                                                            /200 second
   68 0000003C E5801018        str              r1,[r0,#MR0]
   69 00000040         
   70 00000040 E3A01003        mov              r1,#TimerModeResetAndInterrupt
   71 00000044 E5801014        str              r1,[r0,#MCR]
   72 00000048         
   73 00000048 E3A01001        mov              r1,#TimerCommandRun
   74 0000004C E5801004        str              r1,[r0,#TCR]
   75 00000050         
   76 00000050         ;from here, initialisation is finished, so it should be 
                       the main body of the main program
   77 00000050 E10F2000        mrs              r2, cpsr
   78 00000054 E3C2301F        bic              r3, r2, #0x1f
   79 00000058 E3833010        orr              r3, #0x10
   80 0000005C E12FF002        msr              cpsr_cxsf, r2
   81 00000060 EAFFFFFE 
                       wloop   b                wloop       ; branch always
   82 00000064         ;main program execution will never drop below the statem
                       ent above.
   83 00000064         
   84 00000064 FFFFF000 
              00000000 
              E0004000 
              00011FFF         AREA             InterruptStuff, CODE, READONLY
   85 00000000 E24EE004 
                       irqhan  sub              lr,lr,#4
   86 00000004 E92D4003        stmfd            sp!,{r0-r1,lr} ; the lr will be
                                                             restored to the pc
                                                            
   87 00000008         
   88 00000008         ;this is the body of the interrupt handler
   89 00000008 E59F00E8        ldr              r0,=time    ;update time, add 5
                                                            ms
   90 0000000C E5901000        ldr              r1,[r0]
   91 00000010 E2811005        add              r1,#5
   92 00000014 E5801000        str              r1,[r0]
   93 00000018 E3510005        cmp              r1, #5
   94 0000001C DA000014        ble              skip
   95 00000020         ;here you'd put the unique part of your interrupt handle
                       r
   96 00000020         ;all the other stuff is "housekeeping" to save registers
                        and acknowledge interrupts
   97 00000020         ;saving registers
   98 00000020 E59F10D4        ldr              r1,=curr_th
   99 00000024 E5911000        ldr              r1,[r1]
  100 00000028 E3510000        cmp              r1,#0
  101 0000002C 059F00CC        ldreq            r0,=thread0_reg
  102 00000030 159F00CC        ldrne            r0,=thread1_reg
  103 00000034 E59D1000        ldr              r1,[sp]
  104 00000038 E4801004        str              r1,[r0],#4
  105 0000003C E59D1004        ldr              r1,[sp, #4]
  106 00000040 E4801004        str              r1,[r0],#4
  107 00000044 E8A01FFC        stmia            r0!, {r2-r12}
  108 00000048         
  109 00000048 E10F2000        mrs              r2, cpsr



ARM Macro Assembler    Page 4 


  110 0000004C E382300F        orr              r3, r2, #0xf
  111 00000050 E12FF003        msr              cpsr_cxsf, r3
  112 00000054 E1A0400D        mov              r4, sp
  113 00000058 E1A0500E        mov              r5, lr
  114 0000005C E12FF002        msr              cpsr_cxsf, r2
  115 00000060 E4804004        str              r4, [r0], #4
  116 00000064 E4805004        str              r5, [r0], #4
  117 00000068 E480E004        str              lr, [r0], #4
  118 0000006C E14F2000        mrs              r2, spsr
  119 00000070 E4802004        str              r2, [r0], #4
  120 00000074         
  121 00000074         ;loading registers
  122 00000074         skip
  123 00000074 E59F1080        ldr              r1,=curr_th
  124 00000078 E5911000        ldr              r1,[r1]
  125 0000007C E3510000        cmp              r1,#0
  126 00000080 02811001        addeq            r1,#1
  127 00000084 12411001        subne            r1,#1
  128 00000088 E59F006C        ldr              r0,=curr_th
  129 0000008C E5801000        str              r1,[r0]
  130 00000090         ;
  131 00000090 059F006C        ldreq            r0,=thread1_reg
  132 00000094 159F0064        ldrne            r0,=thread0_reg
  133 00000098 E4902004        ldr              r2, [r0], #4
  134 0000009C E4903004        ldr              r3, [r0], #4
  135 000000A0 E58D2000        str              r2, [sp]
  136 000000A4 E58D3004        str              r3, [sp, #4]
  137 000000A8         
  138 000000A8 E280002C        add              r0, #(thread0_sp-thread0_reg-8)
  139 000000AC E10F2000        mrs              r2, cpsr
  140 000000B0 E382300F        orr              r3, r2, #0xf
  141 000000B4 E12FF003        msr              cpsr_cxsf, r3
  142 000000B8 E490D004        ldr              sp, [r0], #4
  143 000000BC E490E004        ldr              lr, [r0], #4
  144 000000C0 E12FF002        msr              cpsr_cxsf, r2
  145 000000C4 E490E004        ldr              lr, [r0], #4
  146 000000C8 E58DE008        str              lr, [sp, #8]
  147 000000CC E4904004        ldr              r4, [r0], #4
  148 000000D0 E16FF004        msr              spsr_csxf, r4
  149 000000D4         
  150 000000D4 E240003C        sub              r0, #(thread1_reg-thread0_reg-8
)
  151 000000D8 E8B01FFC        ldmia            r0!, {r2-r12}
  152 000000DC         ;this is where we stop the timer from making the interru
                       pt request to the VIC
  153 000000DC         ;i.e. we 'acknowledge' the interrupt
  154 000000DC E59F0034        ldr              r0,=T0
  155 000000E0 E3A01001        mov              r1,#TimerResetTimer0Interrupt
  156 000000E4 E5801000        str              r1,[r0,#IR] ; remove MR0 interr
                                                            upt request from ti
                                                            mer
  157 000000E8         
  158 000000E8         ;here we stop the VIC from making the interrupt request 
                       to the CPU:
  159 000000E8 E59F002C        ldr              r0,=VIC
  160 000000EC E3A01000        mov              r1,#0
  161 000000F0 E5801030        str              r1,[r0,#VectAddr] ; reset VIC
  162 000000F4         
  163 000000F4 E8FD8003        ldmfd            sp!,{r0-r1,pc}^ ; return from i



ARM Macro Assembler    Page 5 


                                                            nterrupt, restoring
                                                             pc from lr
  164 000000F8         ; and also restoring the CPSR
  165 000000F8         
  166 000000F8 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              E0004000 
              FFFFF000         AREA             Subroutines, CODE, READONLY
  167 00000000         lights
  168 00000000 E59F9014        ldr              r9,=IO1DIR
  169 00000004 E3A0A80F        ldr              r10,=0x000f0000
  170 00000008 E589A000        str              r10,[r9]
  171 0000000C E59F900C        ldr              r9,=IO1SET
  172 00000010 E589A000        str              r10,[r9]
  173 00000014 E59FA008        ldr              r10,=IO1CLR
  174 00000018 E12FFF1E        bx               lr
  175 0000001C         
  176 0000001C E0028018 
              E0028014 
              E002801C         AREA             Thread0, Code, READONLY ;run at
                                                             1Hz flash, P1.16
  177 00000000         thread0_begin
  178 00000000 EBFFFFFE        bl               lights
  179 00000004         thread0_run
  180 00000004 E3A04801        ldr              r4,=0x00010000
  181 00000008 E59F501C        ldr              r5,=time
  182 0000000C E5955000        ldr              r5,[r5]
  183 00000010 E59F6018        ldr              r6,=((1<<10)-1)
  184 00000014 E0055006        and              r5,r5,r6
  185 00000018 E3A06C02        ldr              r6,=(1<<9)
  186 0000001C E1550006        cmp              r5,r6
  187 00000020 A58A4000        strge            r4,[r10]
  188 00000024 35894000        strlo            r4,[r9]
  189 00000028 EAFFFFF5        b                thread0_run
  190 0000002C         
  191 0000002C 00000000 
              000003FF         AREA             Thread1, Code, READONLY ;run at
                                                             2Hz flash, P1.19
  192 00000000         thread1_begin
  193 00000000 EBFFFFFE        bl               lights
  194 00000004         thread1_run
  195 00000004 E3A04702        ldr              r4,=(1<<19)
  196 00000008 E59F501C        ldr              r5,=time
  197 0000000C E5955000        ldr              r5,[r5]
  198 00000010 E59F6018        ldr              r6,=((1<<9)-1)
  199 00000014 E0055006        and              r5,r5,r6
  200 00000018 E3A06C01        ldr              r6,=(1<<8)
  201 0000001C E1550006        cmp              r5,r6
  202 00000020 A58A4000        strge            r4,[r10]
  203 00000024 35894000        strlo            r4,[r9]
  204 00000028 EAFFFFF5        b                thread1_run
  205 0000002C         
  206 0000002C 00000000 



ARM Macro Assembler    Page 6 


              000001FF         AREA             Stuff, DATA, READWRITE
  207 00000000 00 00 00 
              00       time    SPACE            4
  208 00000004 00 00 00 
              00       curr_th SPACE            4
  209 00000008 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00       thread0_reg
                               SPACE            52
  210 0000003C 00000000 
                       thread0_sp
                               DCD              thread0_stack
  211 00000040 00 00 00 
              00       thread0_lr
                               SPACE            4
  212 00000044 00000000 
                       thread0_pc
                               DCD              thread0_begin
  213 00000048 00000010 
                       thread0_cpsr
                               FILL             4, 0x10, 4
  214 0000004C 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00       thread1_reg
                               SPACE            52
  215 00000080 00000000 
                       thread1_sp
                               DCD              thread1_stack
  216 00000084 00 00 00 



ARM Macro Assembler    Page 7 


              00       thread1_lr
                               SPACE            4
  217 00000088 00000000 
                       thread1_pc
                               DCD              thread1_begin
  218 0000008C 00000010 
                       thread1_cpsr
                               FILL             4, 0x10, 4
  219 00000090 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 8 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 9 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 10 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 11 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 12 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00               SPACE            1024
  220 00000490         thread0_stack
  221 00000490 00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 13 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 14 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 15 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 16 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 17 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 18 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00               SPACE            1024
  222 00000890         thread1_stack
  223 00000890                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -ID:\Utilities\Keil\ARM\RV31\INC -ID:\Utilities\Keil\ARM\CMSIS\I
nclude -ID:\Utilities\Keil\ARM\INC\Philips --predefine="__EVAL SETA 1" --predef
ine="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 524" --list=.\listi
ngs\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

InitialisationAndMain 00000000

Symbol: InitialisationAndMain
   Definitions
      At line 34 in file App.s
   Uses
      None
Comment: InitialisationAndMain unused
start 00000000

Symbol: start
   Definitions
      At line 40 in file App.s
   Uses
      At line 39 in file App.s
Comment: start used once
wloop 00000060

Symbol: wloop
   Definitions
      At line 81 in file App.s
   Uses
      At line 81 in file App.s
Comment: wloop used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

InterruptStuff 00000000

Symbol: InterruptStuff
   Definitions
      At line 84 in file App.s
   Uses
      None
Comment: InterruptStuff unused
irqhan 00000000

Symbol: irqhan
   Definitions
      At line 85 in file App.s
   Uses
      At line 46 in file App.s
Comment: irqhan used once
skip 00000074

Symbol: skip
   Definitions
      At line 122 in file App.s
   Uses
      At line 94 in file App.s
Comment: skip used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Subroutines 00000000

Symbol: Subroutines
   Definitions
      At line 166 in file App.s
   Uses
      None
Comment: Subroutines unused
lights 00000000

Symbol: lights
   Definitions
      At line 167 in file App.s
   Uses
      At line 178 in file App.s
      At line 193 in file App.s

2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Thread0 00000000

Symbol: Thread0
   Definitions
      At line 176 in file App.s
   Uses
      None
Comment: Thread0 unused
thread0_begin 00000000

Symbol: thread0_begin
   Definitions
      At line 177 in file App.s
   Uses
      At line 212 in file App.s
Comment: thread0_begin used once
thread0_run 00000004

Symbol: thread0_run
   Definitions
      At line 179 in file App.s
   Uses
      At line 189 in file App.s
Comment: thread0_run used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Thread1 00000000

Symbol: Thread1
   Definitions
      At line 191 in file App.s
   Uses
      None
Comment: Thread1 unused
thread1_begin 00000000

Symbol: thread1_begin
   Definitions
      At line 192 in file App.s
   Uses
      At line 217 in file App.s
Comment: thread1_begin used once
thread1_run 00000004

Symbol: thread1_run
   Definitions
      At line 194 in file App.s
   Uses
      At line 204 in file App.s
Comment: thread1_run used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Stuff 00000000

Symbol: Stuff
   Definitions
      At line 206 in file App.s
   Uses
      None
Comment: Stuff unused
curr_th 00000004

Symbol: curr_th
   Definitions
      At line 208 in file App.s
   Uses
      At line 98 in file App.s
      At line 123 in file App.s
      At line 128 in file App.s

thread0_cpsr 00000048

Symbol: thread0_cpsr
   Definitions
      At line 213 in file App.s
   Uses
      None
Comment: thread0_cpsr unused
thread0_lr 00000040

Symbol: thread0_lr
   Definitions
      At line 211 in file App.s
   Uses
      None
Comment: thread0_lr unused
thread0_pc 00000044

Symbol: thread0_pc
   Definitions
      At line 212 in file App.s
   Uses
      None
Comment: thread0_pc unused
thread0_reg 00000008

Symbol: thread0_reg
   Definitions
      At line 209 in file App.s
   Uses
      At line 101 in file App.s
      At line 132 in file App.s
      At line 138 in file App.s
      At line 150 in file App.s

thread0_sp 0000003C

Symbol: thread0_sp
   Definitions
      At line 210 in file App.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 138 in file App.s
Comment: thread0_sp used once
thread0_stack 00000490

Symbol: thread0_stack
   Definitions
      At line 220 in file App.s
   Uses
      At line 210 in file App.s
Comment: thread0_stack used once
thread1_cpsr 0000008C

Symbol: thread1_cpsr
   Definitions
      At line 218 in file App.s
   Uses
      None
Comment: thread1_cpsr unused
thread1_lr 00000084

Symbol: thread1_lr
   Definitions
      At line 216 in file App.s
   Uses
      None
Comment: thread1_lr unused
thread1_pc 00000088

Symbol: thread1_pc
   Definitions
      At line 217 in file App.s
   Uses
      None
Comment: thread1_pc unused
thread1_reg 0000004C

Symbol: thread1_reg
   Definitions
      At line 214 in file App.s
   Uses
      At line 102 in file App.s
      At line 131 in file App.s
      At line 150 in file App.s

thread1_sp 00000080

Symbol: thread1_sp
   Definitions
      At line 215 in file App.s
   Uses
      None
Comment: thread1_sp unused
thread1_stack 00000890

Symbol: thread1_stack
   Definitions
      At line 222 in file App.s
   Uses
      At line 215 in file App.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Comment: thread1_stack used once
time 00000000

Symbol: time
   Definitions
      At line 207 in file App.s
   Uses
      At line 89 in file App.s
      At line 181 in file App.s
      At line 196 in file App.s

15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

IO1CLR E002801C

Symbol: IO1CLR
   Definitions
      At line 32 in file App.s
   Uses
      At line 173 in file App.s
Comment: IO1CLR used once
IO1DIR E0028018

Symbol: IO1DIR
   Definitions
      At line 30 in file App.s
   Uses
      At line 168 in file App.s
Comment: IO1DIR used once
IO1SET E0028014

Symbol: IO1SET
   Definitions
      At line 31 in file App.s
   Uses
      At line 171 in file App.s
Comment: IO1SET used once
IR 00000000

Symbol: IR
   Definitions
      At line 8 in file App.s
   Uses
      At line 65 in file App.s
      At line 156 in file App.s

IRQslot_en 00000005

Symbol: IRQslot_en
   Definitions
      At line 28 in file App.s
   Uses
      At line 49 in file App.s
Comment: IRQslot_en used once
IntEnable 00000010

Symbol: IntEnable
   Definitions
      At line 21 in file App.s
   Uses
      At line 53 in file App.s
Comment: IntEnable used once
MCR 00000014

Symbol: MCR
   Definitions
      At line 10 in file App.s
   Uses
      At line 71 in file App.s
Comment: MCR used once
MR0 00000018




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: MR0
   Definitions
      At line 11 in file App.s
   Uses
      At line 68 in file App.s
Comment: MR0 used once
T0 E0004000

Symbol: T0
   Definitions
      At line 5 in file App.s
   Uses
      At line 59 in file App.s
      At line 154 in file App.s

T1 E0008000

Symbol: T1
   Definitions
      At line 6 in file App.s
   Uses
      None
Comment: T1 unused
TCR 00000004

Symbol: TCR
   Definitions
      At line 9 in file App.s
   Uses
      At line 62 in file App.s
      At line 74 in file App.s

Timer0ChannelNumber 00000004

Symbol: Timer0ChannelNumber
   Definitions
      At line 26 in file App.s
   Uses
      At line 27 in file App.s
      At line 49 in file App.s

Timer0Mask 00000010

Symbol: Timer0Mask
   Definitions
      At line 27 in file App.s
   Uses
      At line 52 in file App.s
Comment: Timer0Mask used once
TimerCommandReset 00000002

Symbol: TimerCommandReset
   Definitions
      At line 13 in file App.s
   Uses
      At line 61 in file App.s
Comment: TimerCommandReset used once
TimerCommandRun 00000001




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

Symbol: TimerCommandRun
   Definitions
      At line 14 in file App.s
   Uses
      At line 73 in file App.s
Comment: TimerCommandRun used once
TimerModeResetAndInterrupt 00000003

Symbol: TimerModeResetAndInterrupt
   Definitions
      At line 15 in file App.s
   Uses
      At line 70 in file App.s
Comment: TimerModeResetAndInterrupt used once
TimerResetAllInterrupts 000000FF

Symbol: TimerResetAllInterrupts
   Definitions
      At line 17 in file App.s
   Uses
      At line 64 in file App.s
Comment: TimerResetAllInterrupts used once
TimerResetTimer0Interrupt 00000001

Symbol: TimerResetTimer0Interrupt
   Definitions
      At line 16 in file App.s
   Uses
      At line 155 in file App.s
Comment: TimerResetTimer0Interrupt used once
VIC FFFFF000

Symbol: VIC
   Definitions
      At line 20 in file App.s
   Uses
      At line 44 in file App.s
      At line 159 in file App.s

VectAddr 00000030

Symbol: VectAddr
   Definitions
      At line 22 in file App.s
   Uses
      At line 56 in file App.s
      At line 161 in file App.s

VectAddr0 00000100

Symbol: VectAddr0
   Definitions
      At line 23 in file App.s
   Uses
      At line 47 in file App.s
Comment: VectAddr0 used once
VectCtrl0 00000200

Symbol: VectCtrl0



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 24 in file App.s
   Uses
      At line 50 in file App.s
Comment: VectCtrl0 used once
22 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 35 in file App.s
   Uses
      None
Comment: main unused
1 symbol
395 symbols in table
