


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             Segments, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000         
    4 00000000         ; sample program makes the 4 LEDs P1.16, P1.17, P1.18, P
                       1.19 go on and off in sequence
    5 00000000         
    6 00000000                 EXPORT           start
    7 00000000         start
    8 00000000         
    9 00000000 E0028018 
                       IO1DIR  EQU              0xE0028018
   10 00000000 E0028014 
                       IO1SET  EQU              0xE0028014
   11 00000000 E002801C 
                       IO1CLR  EQU              0xE002801C
   12 00000000 E0028010 
                       IO1PIN  EQU              0xE0028010
   13 00000000 E0028004 
                       IO0SET  EQU              0xE0028004
   14 00000000 E0028008 
                       IO0DIR  EQU              0xE0028008
   15 00000000 E002800C 
                       IO0CLR  EQU              0xE002800C
   16 00000000 00551540 
                       PINMASK EQU              0x00551540
   17 00000000 E59F10DC        ldr              r1,=IO0DIR
   18 00000004 E59F50DC        ldr              r5,=PINMASK
   19 00000008 E59F20D8        ldr              r2,=PINMASK ;select P0.08--P0.2
                                                            5
   20 0000000C E5812000        str              r2,[r1]     ;make them outputs
   21 00000010 E59F10D4        ldr              r1,=IO0SET
   22 00000014 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
   23 00000018 E59F20D0        ldr              r2,=IO0CLR
   24 0000001C E59F00D0        ldr              r0,=IO1DIR
   25 00000020 E3A0A000        ldr              r10,=0
   26 00000024 E580A000        str              r10, [r0]
   27 00000028 E59F00C8        ldr              r0,=IO1PIN
   28 0000002C         ; r1 points to the SET register
   29 0000002C         ; r2 points to the CLEAR register
   30 0000002C         
   31 0000002C E59F30C8 
                       reset   ldr              r3,=pin     ; start with F
   32 00000030 E5825000 
                       floop   str              r5,[r2]     ; clear the bit -> 
                                                            turn on the LED
   33 00000034 E3A06000        ldr              r6,=0       ; r6 is the segment
                                                             bit number
   34 00000038 E5937000        ldr              r7, [r3]    ; r7 = position in 
                                                            pin lookup table
   35 0000003C         ; set the appropriate pins
   36 0000003C E3A08001 
                       iloop   mov              r8, #1
   37 00000040 E1170618        tst              r7, r8, LSL r6
   38 00000044 E59F80B4        ldr              r8, =segment
   39 00000048 17988006        ldrne            r8, [r8, r6]
   40 0000004C 13A09001        movne            r9, #1
   41 00000050 11A08819        lslne            r8, r9, r8
   42 00000054 15818000        strne            r8, [r1]



ARM Macro Assembler    Page 2 


   43 00000058 E2866001        add              r6, #1
   44 0000005C E3560008        cmp              r6, #8
   45 00000060 1AFFFFF5        bne              iloop
   46 00000064         
   47 00000064         ;delay for about a half second
   48 00000064         ;  ldr r4,=20000000
   49 00000064         ;dloop subs r4,r4,#1
   50 00000064         ;  bne dloop
   51 00000064 E3A04000        ldr              r4,=0
   52 00000068 E3A0B601 
                       dloop   ldr              r11,=0x00100000
   53 0000006C E590A000        ldr              r10, [r0]
   54 00000070         ; count buttons pressed
   55 00000070 E11A000B 
                       iiloop  tst              r10, r11
   56 00000074 1A000009        bne              check
   57 00000078 E59FC084        ldr              r12,=9000000
   58 0000007C E25CC001 
                       sloop   subs             r12,r12,#1
   59 00000080 1AFFFFFD        bne              sloop
   60 00000084 E3A0B601        ldr              r11,=0x00100000
   61 00000088 E11A000B 
                       pass    tst              r10, r11
   62 0000008C 02844001        addeq            r4, #1
   63 00000090 E1A0B08B        lsl              r11, #1
   64 00000094 E35B0401        cmp              r11, #0x01000000
   65 00000098 1AFFFFFA        bne              pass
   66 0000009C EA000004        b                disp
   67 000000A0 E1A0B08B 
                       check   lsl              r11, #1
   68 000000A4 E35B0401        cmp              r11, #0x01000000
   69 000000A8 1AFFFFF0        bne              iiloop
   70 000000AC E3540000        cmp              r4, #0
   71 000000B0 0AFFFFEC        beq              dloop
   72 000000B4         
   73 000000B4         
   74 000000B4 E3540002 
                       disp    cmp              r4, #2
   75 000000B8 82433001        subhi            r3, #1
   76 000000BC D2833001        addle            r3, #1
   77 000000C0         
   78 000000C0 E59F9040        ldr              r9, =pinEnd
   79 000000C4 E1530009        cmp              r3, r9
   80 000000C8 059F302C        ldreq            r3, =pin
   81 000000CC         
   82 000000CC E59F9038        ldr              r9, =pinBeg
   83 000000D0 E1530009        cmp              r3, r9
   84 000000D4 059F302C        ldreq            r3, =pinEnd
   85 000000D8 02433001        subeq            r3, #1
   86 000000DC         
   87 000000DC EAFFFFD3        b                floop
   88 000000E0         
   89 000000E0 EAFFFFFE 
                       stop    B                stop
   90 000000E4         
   91 000000E4 E0028008 
              00551540 
              E0028004 
              E002800C 



ARM Macro Assembler    Page 3 


              E0028018 
              E0028010 
              00000000 
              00000000 
              00895440 
              00000000 
              00000000 
              00000000 
              00000000         AREA             lookups, DATA, READONLY
   92 00000000 10 12 14 
              06 0C 0A 
              08 16    segment DCB              16, 18, 20, 6, 12, 10, 8, 22
   93 00000008 00      pinBeg  DCB              0
   94 00000009         ; .GFEDCBA
   95 00000009 71      pin     DCB              2_01110001  ;F
   96 0000000A 79              DCB              2_01111001  ;E
   97 0000000B 5E              DCB              2_01011110  ;D
   98 0000000C 39              DCB              2_00111001  ;C
   99 0000000D 7C              DCB              2_01111100  ;B
  100 0000000E 77              DCB              2_01110111  ;A
  101 0000000F 67              DCB              2_01100111  ;9
  102 00000010 7F              DCB              2_01111111  ;8
  103 00000011 07              DCB              2_00000111  ;7
  104 00000012 7D              DCB              2_01111101  ;6
  105 00000013 6D              DCB              2_01101101  ;5
  106 00000014 66              DCB              2_01100110  ;4
  107 00000015 4F              DCB              2_01001111  ;3
  108 00000016 5B              DCB              2_01011011  ;2
  109 00000017 06              DCB              2_00000110  ;1
  110 00000018 3F              DCB              2_00111111  ;0
  111 00000019 00      pinEnd  DCB              0
  112 0000001A                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Ke
il_v5\ARM\Inc\Philips --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 
1" --predefine="__UVISION_VERSION SETA 516" --list=.\listings\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Segments 00000000

Symbol: Segments
   Definitions
      At line 1 in file App.s
   Uses
      None
Comment: Segments unused
check 000000A0

Symbol: check
   Definitions
      At line 67 in file App.s
   Uses
      At line 56 in file App.s
Comment: check used once
disp 000000B4

Symbol: disp
   Definitions
      At line 74 in file App.s
   Uses
      At line 66 in file App.s
Comment: disp used once
dloop 00000068

Symbol: dloop
   Definitions
      At line 52 in file App.s
   Uses
      At line 71 in file App.s
Comment: dloop used once
floop 00000030

Symbol: floop
   Definitions
      At line 32 in file App.s
   Uses
      At line 87 in file App.s
Comment: floop used once
iiloop 00000070

Symbol: iiloop
   Definitions
      At line 55 in file App.s
   Uses
      At line 69 in file App.s
Comment: iiloop used once
iloop 0000003C

Symbol: iloop
   Definitions
      At line 36 in file App.s
   Uses
      At line 45 in file App.s
Comment: iloop used once
pass 00000088

Symbol: pass



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 61 in file App.s
   Uses
      At line 65 in file App.s
Comment: pass used once
reset 0000002C

Symbol: reset
   Definitions
      At line 31 in file App.s
   Uses
      None
Comment: reset unused
sloop 0000007C

Symbol: sloop
   Definitions
      At line 58 in file App.s
   Uses
      At line 59 in file App.s
Comment: sloop used once
start 00000000

Symbol: start
   Definitions
      At line 7 in file App.s
   Uses
      At line 6 in file App.s
Comment: start used once
stop 000000E0

Symbol: stop
   Definitions
      At line 89 in file App.s
   Uses
      At line 89 in file App.s
Comment: stop used once
12 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

lookups 00000000

Symbol: lookups
   Definitions
      At line 91 in file App.s
   Uses
      None
Comment: lookups unused
pin 00000009

Symbol: pin
   Definitions
      At line 95 in file App.s
   Uses
      At line 31 in file App.s
      At line 80 in file App.s

pinBeg 00000008

Symbol: pinBeg
   Definitions
      At line 93 in file App.s
   Uses
      At line 82 in file App.s
Comment: pinBeg used once
pinEnd 00000019

Symbol: pinEnd
   Definitions
      At line 111 in file App.s
   Uses
      At line 78 in file App.s
      At line 84 in file App.s

segment 00000000

Symbol: segment
   Definitions
      At line 92 in file App.s
   Uses
      At line 38 in file App.s
Comment: segment used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

IO0CLR E002800C

Symbol: IO0CLR
   Definitions
      At line 15 in file App.s
   Uses
      At line 23 in file App.s
Comment: IO0CLR used once
IO0DIR E0028008

Symbol: IO0DIR
   Definitions
      At line 14 in file App.s
   Uses
      At line 17 in file App.s
Comment: IO0DIR used once
IO0SET E0028004

Symbol: IO0SET
   Definitions
      At line 13 in file App.s
   Uses
      At line 21 in file App.s
Comment: IO0SET used once
IO1CLR E002801C

Symbol: IO1CLR
   Definitions
      At line 11 in file App.s
   Uses
      None
Comment: IO1CLR unused
IO1DIR E0028018

Symbol: IO1DIR
   Definitions
      At line 9 in file App.s
   Uses
      At line 24 in file App.s
Comment: IO1DIR used once
IO1PIN E0028010

Symbol: IO1PIN
   Definitions
      At line 12 in file App.s
   Uses
      At line 27 in file App.s
Comment: IO1PIN used once
IO1SET E0028014

Symbol: IO1SET
   Definitions
      At line 10 in file App.s
   Uses
      None
Comment: IO1SET unused
PINMASK 00551540

Symbol: PINMASK



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 16 in file App.s
   Uses
      At line 18 in file App.s
      At line 19 in file App.s

8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 2 in file App.s
   Uses
      None
Comment: main unused
1 symbol
361 symbols in table
